{{#contentFor "pageHeader"}}
    <div class="page-header">
        <div class="container-fluid">
            <h3>{{i18n "area.createBlend.title"}}</h3>
            <ol class="breadcrumb">
				{{#breadcrumbs}}
                    <li><a href="{{href}}">{{title}}</a></li>
				{{/breadcrumbs}}
            </ol>
        </div>
    </div>
{{/contentFor}}

<div class="ibox">
    <div class="ibox-title">
		{{> "ibox-tools"}}
        <div class="pull-right">
            <button id="resinMixGuidelines" class="btn btn-xs btn-default">{{i18n "button.resinMixGuidelines"}}</button>
        </div>
        <h5>{{i18n "feature.lotPreferences.title"}}</h5>
    </div>
    <div class="ibox-content">
        <div class="row margin-bottom-20">
            <div class="col-sm-4">
                <h3>{{i18n "feature.excludeAvailableLots.title"}}</h3>
                <form id="excludedLotsForm" class="blend-optimizer-form">
                    <div class="form-group">
                        <label class="control-label" for="materialTypes">{{i18n "label.materialTypes"}}</label>
                        <div class="input-group">
                            <select id="materialTypes" name="materialTypes" data-placeholder="{{i18n "label.materialTypes"}}" class="chosen-select" multiple="">
								{{#materialTypes}}
                                    <option value="{{type}}">{{type}}</option>
								{{/materialTypes}}
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="control-label" for="skus">{{i18n "label.skus"}}</label>
                        <div class="input-group">
                            <select id="skus" name="skus" data-placeholder="{{i18n "label.skus"}}" class="chosen-select" multiple="">
								{{#materialItems}}
                                    <option value="{{code}}">{{code}}</option>
								{{/materialItems}}
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <button id="draftBlend" type="button" class="btn btn-primary">{{i18n "button.draftBlend"}}</button>
                    </div>
                </form>
            </div>
            <div class="col-sm-4">
                <h3>{{i18n "feature.filterAvailableLots.title"}}</h3>
                <canvas id="availableLotsDonutChart"></canvas>
                <ul class="list-inline">
					{{#materialTypes}}
                        <li><a href="#"><label class="label label-{{type}}">{{type}}</label></a></li>
					{{/materialTypes}}
                </ul>
            </div>
            <div class="col-sm-4">
                <div class="header-container">
                    <h3>{{i18n "feature.blendSpecRulesSummary.title"}}</h3>
                    <a id="blendSpecRules" class="" href="#">{{i18n "feature.blendSpecRules"}}</a>
                </div>
                <ol>
					{{#blendSpecRules}}
                        <li>{{ruleSummary}}</li>
					{{/blendSpecRules}}
                </ol>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-4">
                <div class="lot-panel">
                    <div class="lot-panel-heading">
                        <h3 class="lot-panel-title">{{i18n "feature.availableLots.title"}}</h3>
                        <h6 class="lot-panel-title">
                            <i class="fa {{i18n "icon.dragDrop"}}"></i> {{i18n "feature.dragDrop.description"}}</h6>
                    </div>
                    <ul id="availableLots" class="lot-list-group sortable">
                        <li id="availableLotsPlaceholderListItem" class="lot-list-group-item sortable-ghost">
                            <div class="lot">
                                <div class="lot-title">
                                    <div class="lot-header">{{i18n "feature.availableLotsEmpty.title"}}</div>
                                </div>
                            </div>
                        </li>
						{{#availableLots}}
                            <li id="{{id}}" class="lot-list-group-item">
								{{> "lot"}}
                            </li>
						{{/availableLots}}
                    </ul>
                </div>
            </div>
            <div class="col-sm-4">
                <div class="lot-panel">
                    <div class="lot-panel-heading">
                        <h3 class="lot-panel-title">{{i18n "feature.excludedLots.title"}}</h3>
                        <h6 class="lot-panel-title">
                            <i class="fa {{i18n "icon.dragDrop"}}"></i> {{i18n "feature.dragDrop.description"}}</h6>
                    </div>
                    <ul id="excludedLots" class="lot-list-group">
                        <li id="excludedLotsPlaceholderListItem" class="lot-list-group-item sortable-ghost">
                            <div class="lot">
                                <div class="lot-title">
                                    <div class="lot-header">{{i18n "feature.excludedLotsEmpty.title"}}</div>
                                </div>
                            </div>
                        </li>
						{{#excludedLots}}
                            <li id="{{id}}" class="lot-list-group-item sortable">
								{{> "lot"}}
                            </li>
						{{/excludedLots}}
                    </ul>
                </div>
            </div>
            <div class="col-sm-4">
                <div class="lot-panel">
                    <div class="lot-panel-heading">
                        <h3 class="lot-panel-title">{{i18n "feature.ineligibleLots.title"}}</h3>
                        <h6 class="lot-panel-title">
                            <i class="fa {{i18n "icon.stop"}}"></i> {{i18n "feature.lotMaintenance.description"}}</h6>
                    </div>
                    <ul id="ineligibleLots" class="lot-list-group">
                        <li id="ineligibleLotsPlaceholderListItem" class="lot-list-group-item sortable-ghost">
                            <div class="lot">
                                <div class="lot-title">
                                    <div class="lot-header">{{i18n "feature.ineligibleLotsEmpty.title"}}</div>
                                </div>
                            </div>
                        </li>
						{{#ineligibleLots}}
                            <li id="{{id}}" class="lot-list-group-item">
								{{> "lot"}}
                            </li>
						{{/ineligibleLots}}
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>

{{#contentFor "pageScripts"}}
    <script src="js/lotPreferences.js"></script>
    <script type="text/javascript">
        $(document).ready(function () {

            var availableLotsDoughnutData = {{{json availableLotsDoughnutData}}};

            var doughnutOptions = {
                segmentShowStroke: true,
                segmentStrokeColor: "#fff",
                segmentStrokeWidth: 2,
                percentageInnerCutout: 45,
                animationSteps: 100,
                animationEasing: "easeOutBounce",
                animateRotate: true,
                animateScale: false,
                responsive: true
            };
            var availableLotsDonutChart = document.getElementById("availableLotsDonutChart").getContext("2d");
            new Chart(availableLotsDonutChart).Doughnut(availableLotsDoughnutData, doughnutOptions);

        });
    </script>
{{/contentFor}}
